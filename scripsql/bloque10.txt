-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."Usuarios"
(
    "identificación" integer NOT NULL,
    "primerNombre" character varying(45) NOT NULL,
    "segundoNombre" character varying(45),
    "primerApellido" character varying(45) NOT NULL,
    "segundoApellido" character varying(45) NOT NULL,
    email character varying(100) NOT NULL,
    password character varying(100) NOT NULL,
    "biografía" text,
    "fechaDeRegistro" date NOT NULL,
    "idPaís" integer NOT NULL,
    "idTipoDeUsuario" integer NOT NULL,
    "idNivel" integer NOT NULL,
    "idFotoDePerfil" integer NOT NULL,
    "idFotoDePortada" integer NOT NULL,
    PRIMARY KEY ("identificación")
);

CREATE TABLE IF NOT EXISTS public."Conexiones"
(
    "identificaciónUsuario1" integer NOT NULL,
    "identificaciónUsuario2" integer NOT NULL,
    "fechaDeCreación" "char" NOT NULL,
    PRIMARY KEY ("identificaciónUsuario1", "identificaciónUsuario2")
);

CREATE TABLE IF NOT EXISTS public."NivelesB10"
(
    "idNivel" integer NOT NULL,
    nombre character varying NOT NULL,
    PRIMARY KEY ("idNivel")
);

CREATE TABLE IF NOT EXISTS public."Seguidores"
(
    "identificaciónSeguidor" integer NOT NULL,
    "identificaciónSeguido" integer NOT NULL,
    PRIMARY KEY ("identificaciónSeguidor", "identificaciónSeguido")
);

CREATE TABLE IF NOT EXISTS public."Paises"
(
    "idPaís" integer NOT NULL,
    nombre character varying(45) NOT NULL,
    PRIMARY KEY ("idPaís")
);

CREATE TABLE IF NOT EXISTS public."TiposDeUsuarios"
(
    "idTipoDeUsuario" integer NOT NULL,
    "nombreTipoDeUsuario" character varying(45) NOT NULL,
    PRIMARY KEY ("idTipoDeUsuario")
);

CREATE TABLE IF NOT EXISTS public."Grupos"
(
    "idGrupo" integer NOT NULL,
    "nombreGrupo" character varying(50) NOT NULL,
    "descripción" text,
    "idPrivacidad" integer NOT NULL,
    PRIMARY KEY ("idGrupo")
);

CREATE TABLE IF NOT EXISTS public."TiposDePrivacidad"
(
    "idTipoDePrivacidad" integer NOT NULL,
    privacidad character varying(40) NOT NULL,
    PRIMARY KEY ("idTipoDePrivacidad")
);

CREATE TABLE IF NOT EXISTS public."InscripcionesEnGrupos"
(
    "idGrupo" integer NOT NULL,
    "identificaciónUsuario" integer NOT NULL,
    PRIMARY KEY ("idGrupo", "identificaciónUsuario")
);

CREATE TABLE IF NOT EXISTS public."Publicaciones"
(
    "idPublicación" integer NOT NULL,
    "descripción" text,
    "fechaDePublicación" date NOT NULL,
    "identificaciónUsuario" integer NOT NULL,
    "idTipoDePrivacidad" integer NOT NULL,
    PRIMARY KEY ("idPublicación")
);

CREATE TABLE IF NOT EXISTS public."PublicacionesGrupales"
(
    "idGrupo" integer NOT NULL,
    "idPublicación" integer NOT NULL,
    PRIMARY KEY ("idGrupo", "idPublicación")
);

CREATE TABLE IF NOT EXISTS public."ArchivosPublicaciones"
(
    "idArchivo" integer NOT NULL,
    nombre character varying(50) NOT NULL,
    "fechaDeSubida" date NOT NULL,
    url text NOT NULL,
    "idPublicación" integer NOT NULL,
    PRIMARY KEY ("idArchivo")
);

CREATE TABLE IF NOT EXISTS public."FotosPublicaciones"
(
    "idArchivo" integer NOT NULL,
    "idÁlbum" integer,
    PRIMARY KEY ("idArchivo")
);

CREATE TABLE IF NOT EXISTS public."Álbumes"
(
    "idÁlbum" integer NOT NULL,
    "identificaciónUsuario" integer NOT NULL,
    nombre character varying(50) NOT NULL,
    "fechaDeCreación" date NOT NULL,
    PRIMARY KEY ("idÁlbum")
);

CREATE TABLE IF NOT EXISTS public."Likes"
(
    "idPublicación" integer NOT NULL,
    "identificaciónUsuario" integer NOT NULL,
    fecha date NOT NULL,
    "idTipoDeLike" integer NOT NULL,
    PRIMARY KEY ("idPublicación", "identificaciónUsuario")
);

CREATE TABLE IF NOT EXISTS public."TiposDeLike"
(
    "idTipoDeLike" integer NOT NULL,
    "nombreTipoDeLike" character varying(50) NOT NULL,
    PRIMARY KEY ("idTipoDeLike")
);

CREATE TABLE IF NOT EXISTS public."Comentarios"
(
    "IdentificaciónUsuario" integer NOT NULL,
    "idPublicación" integer NOT NULL,
    fecha date NOT NULL,
    comentario text NOT NULL,
    PRIMARY KEY ("IdentificaciónUsuario", "idPublicación")
);

CREATE TABLE IF NOT EXISTS public."Estudiantes"
(
    "identificaciónUsuario" integer NOT NULL,
    "idPrograma" integer NOT NULL,
    PRIMARY KEY ("identificaciónUsuario")
);

CREATE TABLE IF NOT EXISTS public."Programas"
(
    "idPrograma" integer NOT NULL,
    nombre character varying(50) NOT NULL,
    "idFacultad" integer NOT NULL,
    PRIMARY KEY ("idPrograma")
);

CREATE TABLE IF NOT EXISTS public."Facultades"
(
    "idFacultad" integer NOT NULL,
    nombre character varying(50) NOT NULL,
    PRIMARY KEY ("idFacultad")
);

CREATE TABLE IF NOT EXISTS public."Dependencias"
(
    "idDependencia" integer NOT NULL,
    nombre character varying(50) NOT NULL,
    PRIMARY KEY ("idDependencia")
);

CREATE TABLE IF NOT EXISTS public."Cargos"
(
    "idCargo" integer NOT NULL,
    nombre character varying(50) NOT NULL,
    PRIMARY KEY ("idCargo")
);

CREATE TABLE IF NOT EXISTS public."Administradores"
(
    "identificaciónUsuario" integer NOT NULL,
    "idDependencia" integer NOT NULL,
    "idCargo" integer NOT NULL,
    PRIMARY KEY ("identificaciónUsuario")
);

CREATE TABLE IF NOT EXISTS public."Cursos"
(
    "idCurso" integer NOT NULL,
    nombre character varying(50) NOT NULL,
    "descripción" text NOT NULL,
    costo integer NOT NULL,
    certificado bit NOT NULL,
    "idCategoríaCurso" integer NOT NULL,
    PRIMARY KEY ("idCurso")
);

CREATE TABLE IF NOT EXISTS public."InscripcionesEnCursos"
(
    "idCurso" integer NOT NULL,
    "identificaciónUsuario" integer NOT NULL,
    "fechaDeIngreso" date NOT NULL,
    "idEstadoDeInscripción" integer NOT NULL,
    PRIMARY KEY ("idCurso", "identificaciónUsuario")
);

CREATE TABLE IF NOT EXISTS public."EstadosDeInscripción"
(
    "idEstadoInscripción" integer NOT NULL,
    nombre character varying NOT NULL,
    PRIMARY KEY ("idEstadoInscripción")
);

CREATE TABLE IF NOT EXISTS public."CategoríasCursos"
(
    "idCategoríaCurso" integer NOT NULL,
    "nombreCategoríaCurso" character varying(50) NOT NULL,
    PRIMARY KEY ("idCategoríaCurso")
);

CREATE TABLE IF NOT EXISTS public."SeccionesCursos"
(
    "idSecciónCurso" integer NOT NULL,
    "nombreSecciónCurso" character varying(50) NOT NULL,
    "idCurso" integer NOT NULL,
    PRIMARY KEY ("idSecciónCurso")
);

CREATE TABLE IF NOT EXISTS public."TemasCursos"
(
    "idTema" integer NOT NULL,
    "nombreTemaCurso" character varying NOT NULL,
    "idSección" integer NOT NULL,
    "descripción" text,
    url text NOT NULL,
    PRIMARY KEY ("idTema")
);

ALTER TABLE public."Conexiones"
    ADD FOREIGN KEY ("identificaciónUsuario1")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Conexiones"
    ADD FOREIGN KEY ("identificaciónUsuario2")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Usuarios"
    ADD FOREIGN KEY ("idNivel")
    REFERENCES public."NivelesB10" ("idNivel")
    NOT VALID;


ALTER TABLE public."Seguidores"
    ADD FOREIGN KEY ("identificaciónSeguidor")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Seguidores"
    ADD FOREIGN KEY ("identificaciónSeguido")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Usuarios"
    ADD FOREIGN KEY ("idPaís")
    REFERENCES public."Paises" ("idPaís")
    NOT VALID;


ALTER TABLE public."Usuarios"
    ADD FOREIGN KEY ("idTipoDeUsuario")
    REFERENCES public."TiposDeUsuarios" ("idTipoDeUsuario")
    NOT VALID;


ALTER TABLE public."Grupos"
    ADD FOREIGN KEY ("idPrivacidad")
    REFERENCES public."TiposDePrivacidad" ("idTipoDePrivacidad")
    NOT VALID;


ALTER TABLE public."InscripcionesEnGrupos"
    ADD FOREIGN KEY ("idGrupo")
    REFERENCES public."Grupos" ("idGrupo")
    NOT VALID;


ALTER TABLE public."InscripcionesEnGrupos"
    ADD FOREIGN KEY ("identificaciónUsuario")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Publicaciones"
    ADD FOREIGN KEY ("identificaciónUsuario")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Publicaciones"
    ADD FOREIGN KEY ("idTipoDePrivacidad")
    REFERENCES public."TiposDePrivacidad" ("idTipoDePrivacidad")
    NOT VALID;


ALTER TABLE public."PublicacionesGrupales"
    ADD FOREIGN KEY ("idGrupo")
    REFERENCES public."Grupos" ("idGrupo")
    NOT VALID;


ALTER TABLE public."PublicacionesGrupales"
    ADD FOREIGN KEY ("idPublicación")
    REFERENCES public."Publicaciones" ("idPublicación")
    NOT VALID;


ALTER TABLE public."ArchivosPublicaciones"
    ADD FOREIGN KEY ("idPublicación")
    REFERENCES public."Publicaciones" ("idPublicación")
    NOT VALID;


ALTER TABLE public."Álbumes"
    ADD FOREIGN KEY ("identificaciónUsuario")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."FotosPublicaciones"
    ADD FOREIGN KEY ("idArchivo")
    REFERENCES public."ArchivosPublicaciones" ("idArchivo")
    NOT VALID;


ALTER TABLE public."FotosPublicaciones"
    ADD FOREIGN KEY ("idÁlbum")
    REFERENCES public."Álbumes" ("idÁlbum")
    NOT VALID;


ALTER TABLE public."Likes"
    ADD FOREIGN KEY ("idPublicación")
    REFERENCES public."Publicaciones" ("idPublicación")
    NOT VALID;


ALTER TABLE public."Likes"
    ADD FOREIGN KEY ("identificaciónUsuario")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Likes"
    ADD FOREIGN KEY ("idTipoDeLike")
    REFERENCES public."TiposDeLike" ("idTipoDeLike")
    NOT VALID;


ALTER TABLE public."Comentarios"
    ADD FOREIGN KEY ("IdentificaciónUsuario")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Comentarios"
    ADD FOREIGN KEY ("idPublicación")
    REFERENCES public."Publicaciones" ("idPublicación")
    NOT VALID;


ALTER TABLE public."Estudiantes"
    ADD FOREIGN KEY ("idPrograma")
    REFERENCES public."Programas" ("idPrograma")
    NOT VALID;


ALTER TABLE public."Estudiantes"
    ADD FOREIGN KEY ("identificaciónUsuario")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Programas"
    ADD FOREIGN KEY ("idFacultad")
    REFERENCES public."Facultades" ("idFacultad")
    NOT VALID;


ALTER TABLE public."Administradores"
    ADD FOREIGN KEY ("identificaciónUsuario")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."Administradores"
    ADD FOREIGN KEY ("idDependencia")
    REFERENCES public."Dependencias" ("idDependencia")
    NOT VALID;


ALTER TABLE public."Administradores"
    ADD FOREIGN KEY ("idCargo")
    REFERENCES public."Cargos" ("idCargo")
    NOT VALID;


ALTER TABLE public."InscripcionesEnCursos"
    ADD FOREIGN KEY ("idCurso")
    REFERENCES public."Cursos" ("idCurso")
    NOT VALID;


ALTER TABLE public."InscripcionesEnCursos"
    ADD FOREIGN KEY ("identificaciónUsuario")
    REFERENCES public."Usuarios" ("identificación")
    NOT VALID;


ALTER TABLE public."InscripcionesEnCursos"
    ADD FOREIGN KEY ("idEstadoDeInscripción")
    REFERENCES public."EstadosDeInscripción" ("idEstadoInscripción")
    NOT VALID;


ALTER TABLE public."Cursos"
    ADD FOREIGN KEY ("idCategoríaCurso")
    REFERENCES public."CategoríasCursos" ("idCategoríaCurso")
    NOT VALID;


ALTER TABLE public."SeccionesCursos"
    ADD FOREIGN KEY ("idCurso")
    REFERENCES public."Cursos" ("idCurso")
    NOT VALID;


ALTER TABLE public."TemasCursos"
    ADD FOREIGN KEY ("idSección")
    REFERENCES public."SeccionesCursos" ("idSecciónCurso")
    NOT VALID;

END;